<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic concepts and data types · Gfit.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Gfit.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Gfit.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="concepts.html">Basic concepts and data types</a><ul class="internal"><li><a class="tocitem" href="#How-to-access-the-data-structures"><span>How to access the data structures</span></a></li></ul></li><li><a class="tocitem" href="builtincomp.html">Built-in components</a></li><li><a class="tocitem" href="customcomp.html">Custom components</a></li><li><a class="tocitem" href="parameter.html">Parameter constraints</a></li><li><a class="tocitem" href="multifit.html">Multi-dataset fitting</a></li><li><a class="tocitem" href="viewers.html">Viewers</a></li><li><a class="tocitem" href="minimizers.html">Minimizers</a></li><li><a class="tocitem" href="misc.html">Miscellaneous</a></li><li><a class="tocitem" href="api.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="concepts.html">Basic concepts and data types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="concepts.html">Basic concepts and data types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gcalderone/GFit.jl/blob/master/docs/src/concepts.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-concepts-and-data-types"><a class="docs-heading-anchor" href="#Basic-concepts-and-data-types">Basic concepts and data types</a><a id="Basic-concepts-and-data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-concepts-and-data-types" title="Permalink"></a></h1><p>In order to exploit the <strong>GFit.jl</strong> model expressiveness we need to introduce a few concepts, and the associated data types:</p><ul><li><p><em>Domain</em>: an N-dimensional grid of points where the model is to be evaluated, it is analogous to the independent varible <span>$\vec{x}$</span> in the <span>$f(\vec{x})$</span> notation. It is represented by either:</p><ul><li>a <a href="api.html#GFit.Domain"><code>Domain{N}</code></a> object for linear domains, i.e. where the coordinates for each of the N dimensions are explicitly specified for all the points;</li><li>or a <a href="api.html#GFit.CartesianDomain"><code>CartesianDomain{N}</code></a> object where the coordinates are specified for each of the <code>N</code> axis and the coordinates for all points are obtained as the cartesian product of all the axes.  A cartesian domain is internally transformed into a linear one when needed;</li></ul><p>A domain object (either linear or cartesian) is required as first argument for the <code>Model</code> and <code>Measures</code> constructors (see below).</p></li><li><p><em>Measures</em>: a container for the N-dimensional empirical data and their associated <span>$1\sigma$</span> Gaussian uncertainties, represented by an object of type <a href="api.html#GFit.Measures"><code>Measures{N}</code></a> (further options may be available in the future, such as Poisson counts);</p></li><li><p><em>Model component</em>: the atomic building block of a (potentially very complex) model, it is essentially a function used to map a <code>Domain</code> or <code>CartesianDomain</code> object into a <code>Vector{Float64}</code> representing the component evaluation.  A component is a structure inheriting from <code>GFit.AbstractComponent</code> and is typically characterized by one or more <em>parameters</em> (see below). One component&#39;s evaluation can also be used as input for another one&#39;s calculation, thus inducing a dependency between the two.  The <strong>GFit.jl</strong> package provides several <a href="builtincomp.html#Built-in-components">Built-in components</a>, and new ones can be implemented by the user (see <a href="customcomp.html#Custom-components">Custom components</a>).  The memoization mechanism operates at the component level and aims to avoid unnecessary re-evaluation of the component if none of its parameter values has changed since last evaluation;</p></li><li><p><em>Parameter</em>: a single floating point number characterizing a specific aspect for the evaluation of a component (e.g. the slope of a power law or the width of a Gaussian profile). The parameter values are automatically varied during the fitting process until the residuals between the global model evaluation and the empirical data are minimized.  A parameter can be fixed to a specific value, limited in an interval, and/or be dynamically calculated (patched) according to the values of other parameters.  All parameters are represented by an object of type <a href="api.html#GFit.Parameter"><code>GFit.Parameter</code></a>;</p></li><li><p><em>Model</em>: is the overall model description, whose evaluation is supposed to be compared to a single <code>Measures</code> objects and whose parameters are varied during fitting to reduce the residuals. All models are represented by an object of type <a href="api.html#GFit.Model"><code>Model</code></a> containing a single <code>Domain</code> or <code>CartesianDomain</code> object representing the domain where the model will be evaluated, and one or more <em>components</em> characterizing the model itself.  Each component is identified by a unique name (actually a <code>Symbol</code>) within a model.</p><ul><li>Component dependencies and <em>main component</em>: the evaluation of a component, say <code>A</code>, may use the output of another component, say <code>B</code>, to calculate its output.  In this case we say that <code>A</code> <em>depends</em> on <code>B</code>, and therefore <code>B</code> needs to be evaluated before <code>A</code> (circular dependencies are not allowed, and would raise an error if attempted).  The dependencies are automatically identified, and the last component being evaluated is dubbed <em>main component</em> since its output represent the overall model evaluation;</li></ul></li><li><p><em>Multi-model</em>: a <code>Vector{Model}</code> containing two or more models, suitable to be compared to a corresponding number of <code>Measures</code> objects to perform <a href="multifit.html#Multi-dataset-fitting">Multi-dataset fitting</a>;</p></li><li><p><em>Fit statistics</em>: the purpose of fitting is to minimize the <em>distance</em> between the model and the data, as quantified by a proper fit statistic (typically a reduced <span>$\chi^2$</span> for the Gaussian uncertainties case). Such statistic, as well as other information concerning the fit and the best fit parameter values and uncertainties, are returned by the <a href="api.html#GFit.fit"><code>fit()</code></a> function in a <a href="api.html#GFit.FitStats"><code>GFit.FitStats</code></a> structure.</p></li><li><p>Standard Julia functions can be used by <strong>GFit.jl</strong> in two different contexts:</p><ul><li>to calculate the value of a <code>Parameter</code> as a function of other <code>Parameter</code>&#39;s values. In this case the parameters are said to be <em>patched</em>, or linked, since there is a constraint between their values.  Two (or more) parameters may be patched within the same model, or across models when performing <a href="multifit.html#Multi-dataset-fitting">Multi-dataset fitting</a>;</li><li>to define a model component using a standard Julia mathematical expression involving <code>Parameter</code>s values or other components.</li></ul><p>In both cases the Julia function should be properly encapsulated in a <a href="api.html#GFit.FunctDesc"><code>GFit.FunctDesc</code></a> structure, which is typically generated using the <a href="api.html#GFit.@λ"><code>@λ</code></a> convenience macro.</p></li><li><p><em>Minimizer</em>: the <strong>GFit.jl</strong> package provides just the tools to define and manipulate a model, but the actual fitting (namely, the minimization of the residuals) is performed by an external <em>minimizer</em> library.  Two minimizers are currently available:</p><ul><li><a href="https://github.com/JuliaNLSolvers/LsqFit.jl">LsqFit</a>: a pure-Julia minimizer;</li><li><a href="https://github.com/gcalderone/CMPFit.jl">CMPFit</a>: a C minimizer wrapped in a Julia package.</li></ul><p>Both are automatically installed with <strong>GFit.jl</strong>, and <code>LsqFit</code> is the default choice (unless otherwise specified in the <a href="api.html#GFit.fit"><code>fit()</code></a> function call).  However, for some of the most complex cases <code>CMPFit</code> seems to be more robust and less sensitive to initial guess parameters.</p></li><li><p><em>Mock data</em>: evaluating a a model may be useful even before actual data are available, e.g. to test its robustness and capabilities.  To this purpose <strong>GFit.jl</strong> provides the <a href="api.html#GFit.mock"><code>GFit.mock()</code></a> function which is able to generate mock data set(s) using a (multi-)model as ground truth, and add a random noise to simulate the measurement process. This functionality is used in all the examples presented in the next sections.</p></li></ul><h2 id="How-to-access-the-data-structures"><a class="docs-heading-anchor" href="#How-to-access-the-data-structures">How to access the data structures</a><a id="How-to-access-the-data-structures-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-access-the-data-structures" title="Permalink"></a></h2><p><strong>GFit.jl</strong> interface aims to be easy to use and remember, and the number of exported function is purposely kept to a minimum.  As a consequence, many of the above mentioned data structures are accessible using either indexing (as in dictionary or vectors) or as field of a <code>struct</code>-like interface, starting from a single <a href="api.html#GFit.Model"><code>Model</code></a> or a <code>Vector{Model}</code> object. In particular:</p><ul><li>a <em>MultiModel</em> is a vector of <code>Model</code>s, with the inidivudal element accessible via indexing with an integer number;</li><li>a <code>Model</code> object can be considered as a dictionary of components, with <code>Symbol</code> keys. The <code>keys()</code> function will return the name of components in the model;</li><li>a component is a structure, either built-in (see <a href="builtincomp.html#Built-in-components">Built-in components</a>) or implemented by the user (<a href="customcomp.html#Custom-components">Custom components</a>).  One or more structure fields are supposed to represent the component parameters (i.e. objects of type <a href="api.html#GFit.Parameter"><code>GFit.Parameter</code></a>);</li><li>The fields of a component structure, as well as the fields of the <a href="api.html#GFit.Parameter"><code>GFit.Parameter</code></a>) structures are accessed using the standard dot (<code>.</code>) notation.</li></ul><p>As an example, the syntax to access the value of a parameter in a single model case is: <code>model[:Component1].Param1.val</code>.  In a multi-model case it is: <code>multi[1][:Component1].Param1.val</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="builtincomp.html">Built-in components »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 26 February 2023 18:26">Sunday 26 February 2023</span>. Using Julia version 1.8.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
