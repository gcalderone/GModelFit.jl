<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic concepts and data types · Gfit.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Gfit.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Gfit.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="concepts.html">Basic concepts and data types</a><ul class="internal"><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li></ul></li><li><a class="tocitem" href="builtincomp.html">Built-in components</a></li><li><a class="tocitem" href="viewers.html">Viewers</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="api.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="concepts.html">Basic concepts and data types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="concepts.html">Basic concepts and data types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gcalderone/GFit.jl/blob/master/docs/src/concepts.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-concepts-and-data-types"><a class="docs-heading-anchor" href="#Basic-concepts-and-data-types">Basic concepts and data types</a><a id="Basic-concepts-and-data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-concepts-and-data-types" title="Permalink"></a></h1><p>In order to exploit the <strong>GFit.jl</strong> model expressiveness we need to introduce a few concepts, and the associated data types:</p><ul><li><p><em>Domain</em>: an N-dimensional grid of points where the model is to be evaluated, it is analogous to the independent varible <span>$\vec{x}$</span> in the <span>$f(\vec{x})$</span> notation. It is represented by either:</p><ul><li>a <a href="api.html#GFit.Domain"><code>Domain{N}</code></a> object for linear domains, i.e. where the coordinates for each of the N dimensions are explicitly specified for all the points;</li><li>or a <a href="api.html#GFit.CartesianDomain"><code>CartesianDomain{N}</code></a> object where the coordinates are specified for each of the <code>N</code> axis and the coordinates for all points are obtained as the cartesian product of the axis.  A carteisan domain is internally transformed into a linear one when needed;</li></ul><p>A domain object (either linear or cartesian) is required as first argument for the <code>Model</code> and <code>Measures</code> constructors (see below). However only the former is actually used during evaluation, while the latter is only used for visualization and consistency checks.</p></li><li><p><em>Measures</em>: a container for the N-dimensional empirical data and their associated <span>$1\sigma$</span> Gaussian uncertainties, represented by an object of type <a href="api.html#GFit.Measures"><code>Measures{N}</code></a> (further options may be available in the future, such as Poisson counts);</p></li><li><p><em>Model component</em>: the atomic building block of a (potentially very complex) model, it is essentially a function used to map a <code>Domain</code> or <code>CartesianDomain</code> object into a <code>Vector{Float64}</code> represeting the component evaluation.  All components are structures inheriting from <code>GFit.AbstractComponent</code> and are typically parametrized (see below).  The <strong>GFit.jl</strong> package provides several <a href="builtincomp.html#Built-in-components">Built-in components</a>, and new ones can be implemented by the user.  The caching mechanism operates at the component level and aims to avoid unnecessary re-evaluation of the component if none has of its parameter values has changed since last evaluation;</p></li><li><p><em>Parameter</em>: a floating point value characterizing a specific aspect for the evaluation of a model component, e.g. the slope of a power law or the width of a Gaussian profile.  The parameter values are changed during the fitting process until the residuals between the global model evaluation and the empirical data are minimized.  A parameter can be fixed to a specific value, limited in an interval, and/or be dynamically calculated (patched) according to the values of other parameters.  All parameters are represented by an object of type <a href="api.html#GFit.Parameter"><code>GFit.Parameter</code></a>;</p></li><li><p><em>Model</em>: is the overall model description, whose evaluation is supposed to be compared to a single <code>Measures</code> objects and whose parameters are varied during fitting to reduce the residuals. All models are represented by an object of type <a href="api.html#GFit.Model"><code>Model</code></a> containing a single <code>Domain</code> or <code>CartesianDomain</code> object representing the domain where the model will be evaluated, and one or more <em>components</em> characterizing the model itself.  Each component is identified by a unique name (actually a <code>Symbol</code>) within a model.</p><ul><li><em>Main component</em> of a model: the evaluation of a component, say <code>A</code>, may use the output of another component, say <code>B</code>, to calculate its output.  In this case we say tha <code>A</code> <em>depends</em> on <code>B</code>, and therefore <code>B</code> needs to be evaluated before <code>A</code> (circular dependencies are not allowed, and would raise an error if attempted).  The dependencies are automatically identified, and the last component being evaluated is dubbed <em>main component</em> since it is its output which represent the overall model evaluation;</li></ul></li><li><p><em>Multi-model</em>: a container for two or more models, suitable to be compared to a corresponding number of <code>Measures</code> objects to perform multi-dataset fitting.  All models are identified by a unique integer identifier, starting from 1.  A multi-model is represented by an object of type <code>MultiModel</code>;</p></li><li><p><em>Fit results</em>: the purpose of fitting is to minimize the <em>distance</em> between the model and the data, as quantified by a proper fit statistic (typically a reduced <span>$\chi^2$</span> for the Gaussian uncertainties case). Such statistic, as well as other information concerning the fit and the best fit parameter values and uncertainties, are returned by the <a href="api.html#GFit.fit!"><code>fit!()</code></a> function in a <a href="api.html#GFit.FitResult"><code>GFit.FitResult</code></a> structure.</p></li><li><p><em>λ-function</em>: is an anonymous function used in two different contexts within <strong>GFit.jl</strong>:</p><ul><li>to calculate the value of a <code>Parameter</code> as a function of other <code>Parameter</code>&#39;s values. In this case the parameters are said to be <em>patched</em>, or linked, since there is a constraint between their values.  Two (or more) parameters may be patched within the same model, or across models in a multi-model analysis;</li><li>to define a model component using a standard Julia mathematical expression involving <code>Parameter</code>s values or other components.</li></ul><p>In both cases the λ-function is generated using the <a href="api.html#GFit.@λ"><code>@λ</code></a> macro and the standard Julia syntax for anonymous functions (e.g. <code>@λ x -&gt; 2 .* x</code>).</p></li><li><p><em>Minimizer</em>: the <strong>GFit.jl</strong> package provides just the tools to define and manipulate a model, but the actual fitting (or minimization of the residuals) is performed by an external <em>minimizer</em> library.  Two minimizers are currently available:</p><ul><li><a href="https://github.com/JuliaNLSolvers/LsqFit.jl">LsqFit</a>: a pure-Julia minimizer;</li><li><a href="https://github.com/gcalderone/CMPFit.jl">CMPFit</a>: a C minimizer wrapped in a Julia package.</li></ul><p>Both are automatically installed with <strong>GFit.jl</strong>, and <code>LsqFit</code> is the default choice (unless otherwise specified in the <a href="api.html#GFit.fit!"><code>fit!()</code></a> function call).  However, for the most complex cases <code>CMPFit</code> seems to be more robust and less sensitive to initial guess parameters.</p></li><li><p><em>Mock data</em>: sometimes it is useful to test a model even before actual data are available, e.g. to test its robustness and capabilities.  In this case it is possible to generate mock data set(s) using the model as ground truth, and add a random noise to simulate the measurement process. This  functionality is provided by the <a href="api.html#GFit.mock"><code>GFit.mock()</code></a> function, and will be used in all the examples presented in the next sections.</p></li></ul><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>Many of the above mentioned data structures are accessible using either indexing (as in dictionary or vectors) or a <code>struct</code>-like interface, hence it is important to keep in mind the relationships among some of the concepts to access them:</p><pre><code class="nohighlight hljs">Multi-model (`multi`)
 |
 + -- Model 1 (`model`)
 |     |
 |     + -- Domain
 |     + -- Component1
 |     |     |
 |     |     + -- Param1
 |     |     + -- Param2
 |     |     + -- ...
 |     + -- Component2
 |     + -- etc.
 + -- Model2
 + -- ...</code></pre><p>E.g. the syntax to access the value of a parameter in a single model case is: <code>model[:Component1].Param1.val</code>.  In a multi-model case it is: <code>multi[1][:Component1].Param1.val</code>. ```</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="builtincomp.html">Built-in components »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Wednesday 3 August 2022 13:45">Wednesday 3 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
