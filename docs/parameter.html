<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parameter constraints · Gfit.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Gfit.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Gfit.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="concepts.html">Basic concepts and data types</a></li><li><a class="tocitem" href="builtincomp.html">Built-in components</a></li><li><a class="tocitem" href="customcomp.html">Custom components</a></li><li class="is-active"><a class="tocitem" href="parameter.html">Parameter constraints</a></li><li><a class="tocitem" href="multifit.html">Multi-dataset fitting</a></li><li><a class="tocitem" href="viewers.html">Viewers</a></li><li><a class="tocitem" href="minimizers.html">Minimizers</a></li><li><a class="tocitem" href="misc.html">Miscellaneous</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="api.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="parameter.html">Parameter constraints</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="parameter.html">Parameter constraints</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gcalderone/GFit.jl/blob/master/docs/src/parameter.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Parameter-constraints"><a class="docs-heading-anchor" href="#Parameter-constraints">Parameter constraints</a><a id="Parameter-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-constraints" title="Permalink"></a></h1><p>Models are characterized by <em>parameters</em> whose values are modified during fitting until a convergence criterion is met, and the <em>best fit</em> values are identified.  In many cases, however, the parameters can not vary arbitrarily but should satisfy some constraints for their values to be meaningful.  <strong>GFit.jl</strong> supports the definition of parameter constraints in two flavours:</p><ul><li>the parameter can be fixed to a specific value, or limited in a range of values;</li><li>the parameter can be dynamically calculated, based on other parameter values.</li></ul><p>In the latter case the parameters are said to be <em>patched</em> through a mathematical relationship.</p><p>A parameter constraint is defined by directly modifiying the structure of the corresponding <a href="api.html#GFit.Parameter"><code>GFit.Parameter</code></a> structure.  Note that such structure provides two field for the associated numerical value:</p><ul><li><code>val</code>: is the parameter value which is being varied by the minimizer during fitting.  The value set before the fitting is the <em>guess</em> value.  The value after fitting is the <em>best fit</em> one;</li><li><code>actual</code>: is the actual parameter value, as calculated by the patch expression.  Note that the value will be overwitten at each model evaluation, hence setting this field has no effect.</li></ul><p>The <code>val</code> and <code>actual</code> values are identical if no patch constraint has been defined.</p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>The following shows how to implement the afore-mentioned constraints (note that here we use the <a href="api.html#GFit.mock"><code>GFit.mock()</code></a> function to generate <a href="misc.html#Generate-mock-datasets">Generate mock datasets</a>):</p><pre><code class="language-julia hljs">using GFit

dom = Domain(0:0.1:6)
model = Model(dom, :l1 =&gt; GFit.Gaussian(1, 2, 0.2),
                   :l2 =&gt; GFit.Gaussian(1, 3, 0.5),
                   :bkg =&gt; GFit.OffsetSlope(0.5, 1, 0.1),
                   :main =&gt; SumReducer(:bkg, :l1, :l2));
data = GFit.mock(Measures, model)

res = fit!(model, data)</code></pre><p><img src="assets/example_patch1.png" alt/></p><p>and can not be modified during the fitting process.  To fix a <code>Parameter</code> object simply set its <code>fixed</code> field to true;</p><ul><li>limited range: the parameter is allowed to vary only within a range limited by the <code>low</code> and <code>high</code> fields values;</li><li>the current parameter value can be constrained to be equal to that of another parameter with the same name, but belonging to another component within the same model.  To establish such link simply set the component name in the <code>patch</code> field;</li><li>the current parameter value can be dynamically calculated by a mathematical expression involving all other parameters within the same model. In this case the <code>patch</code> should be set to a <code>@λ</code> function with a single argument.  The parameter is au</li></ul><p>containing both the parameter numerical value and the constraint prescriptions. Note that </p><p>The current value, in particular, is modified during the fitting process to minimize the differences between the model and the data.  The possible values for each parameter can be either unspecified (i.e. the value can be anything from <code>-Inf</code> to <code>+Inf</code>) or subject to a number of constraints. </p><p>The possible constraints are:</p><ul><li>fixed parameter: the parameter is fixed to a specific value and can not be modified during the fitting process.  To fix a <code>Parameter</code> object simply set its <code>fixed</code> field to true;</li><li>limited range: the parameter is allowed to vary only within a range limited by the <code>low</code> and <code>high</code> fields values;</li><li>the current parameter value can be constrained to be equal to that of another parameter with the same name, but belonging to another component within the same model.  To establish such link simply set the component name in the <code>patch</code> field;</li><li>the current parameter value can be dynamically calculated by a mathematical expression involving all other parameters within the same model. In this case the <code>patch</code> should be set to a <code>@λ</code> function with a single argument.  The parameter is au</li></ul><ul><li>model parameters can be fixed to a specific value, limited in an interval, and/or be dynamically linked (patched) to the values of other parameters (see <a href="parameter.html#Parameter-constraints">Parameter constraints</a>);</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="customcomp.html">« Custom components</a><a class="docs-footer-nextpage" href="multifit.html">Multi-dataset fitting »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 16 January 2023 20:12">Monday 16 January 2023</span>. Using Julia version 1.8.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
